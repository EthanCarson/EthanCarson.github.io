<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Card Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Smooth transitions for theme switching and slider */
        #slider-track, body, header, footer, .card-container, .card-text {
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        /* Focus styles for accessibility */
        button:focus-visible, 
        input:focus-visible + div {
            outline: 2px solid #2563eb;
            outline-offset: 4px;
            border-radius: 9999px;
        }

        /* Custom toggle switch styling */
        .dot {
            transition: all 0.3s ease-in-out;
        }
        input:checked ~ .dot {
            transform: translateX(100%);
            background-color: #3b82f6;
        }

        /* Subtle shadow for arrows */
        .shadow-icon {
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
        }

        /* Enhanced custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #475569;
        }

        /* Carousel Logic: Reinforcing side-by-side positioning */
        #slider-track {
            display: flex !important;
            flex-direction: row !important;
            height: 100%;
            width: 100%;
        }

        .card-wrapper {
            flex: 0 0 100%; 
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Grid View Layout */
        .grid-mode #slider-track {
            display: grid !important;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
            transform: none !important;
            padding: 2rem;
            height: auto;
            width: 100%;
        }

        .grid-mode .card-wrapper {
            flex: none;
            width: 100% !important;
            height: auto !important;
            display: block;
        }

        .grid-mode .card-container {
            max-height: none !important;
            height: auto !important;
            flex-direction: column !important;
        }

        .grid-mode .card-media {
            width: 100% !important;
            height: 220px !important;
        }

        .grid-mode .card-text {
            width: 100% !important;
            overflow-y: visible !important;
            padding: 1.5rem !important;
        }

        /* Theme Force Overrides */
        body:not(.dark) { background-color: #f8fafc; color: #0f172a; }
        body:not(.dark) header h1 { color: #0f172a !important; }

        .dark body, .dark #main-container, .dark #slider-container {
            background-color: #020617 !important;
        }
        
        .dark header, .dark footer {
            background-color: #0f172a !important;
            border-color: #1e293b !important;
        }

        .dark header h1 { color: #ffffff !important; }

        .dark .card-container, .dark .card-text {
            background-color: #1e293b !important;
            color: #f1f5f9;
        }
    </style>
</head>
<body id="app-body" class="bg-gray-100 text-slate-900 font-sans h-screen flex flex-col overflow-hidden transition-colors duration-300">

    <!-- Header / Title Area -->
    <header class="py-6 px-4 bg-white shadow-sm z-10 border-b border-gray-200 transition-colors duration-300">
        <div class="max-w-7xl mx-auto text-center">
            <h1 id="main-title" class="text-3xl font-black tracking-tight">Card Explorer</h1>
            <p class="text-slate-500 text-sm mt-1 dark:text-slate-400 font-medium">Navigate features using arrows, dots, or keyboard.</p>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="main-container" class="flex-grow relative flex items-center justify-center overflow-hidden bg-gray-100 transition-colors duration-300">
        
        <!-- Navigation Arrows -->
        <div id="nav-arrows" class="absolute inset-y-0 left-0 right-0 pointer-events-none z-20 flex justify-between items-center px-4 sm:px-8">
            <button 
                id="prev-btn" 
                aria-label="Previous Slide" 
                class="text-white/70 hover:text-white transition-all transform hover:scale-125 active:scale-95 shadow-icon pointer-events-auto p-2"
            >
                <i class="fas fa-chevron-left text-5xl"></i>
            </button>
            <button 
                id="next-btn" 
                aria-label="Next Slide" 
                class="text-white/70 hover:text-white transition-all transform hover:scale-125 active:scale-95 shadow-icon pointer-events-auto p-2"
            >
                <i class="fas fa-chevron-right text-5xl"></i>
            </button>
        </div>

        <!-- Slider Track Container -->
        <div class="w-full h-full overflow-hidden" id="slider-container" role="region" aria-roledescription="carousel" aria-label="Feature Cards">
            <div id="slider-track">
                <!-- Cards injected here -->
            </div>
        </div>
    </main>

    <!-- Bottom Controls -->
    <footer class="bg-white border-t border-gray-200 py-6 px-4 transition-colors duration-300">
        <div class="max-w-6xl mx-auto flex flex-col lg:flex-row items-center justify-between gap-6">
            
            <div class="flex items-center gap-6 order-2 lg:order-1">
                <!-- Grid Layout Toggle -->
                <div class="flex items-center gap-3">
                    <span id="layout-label" class="text-sm font-bold text-slate-700 dark:text-slate-300">Grid View</span>
                    <label for="layout-toggle" class="flex items-center cursor-pointer relative">
                        <input type="checkbox" id="layout-toggle" class="sr-only" aria-labelledby="layout-label">
                        <div class="block bg-gray-300 w-12 h-7 rounded-full transition-colors border-2 border-transparent dark:bg-slate-700"></div>
                        <div class="dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full shadow-sm transition-transform"></div>
                    </label>
                </div>

                <!-- Night Mode Toggle -->
                <div class="flex items-center gap-3">
                    <span id="theme-label" class="text-sm font-bold text-slate-700 dark:text-slate-300">Night Mode</span>
                    <label for="theme-toggle" class="flex items-center cursor-pointer relative">
                        <input type="checkbox" id="theme-toggle" class="sr-only" aria-labelledby="theme-label">
                        <div class="block bg-gray-300 w-12 h-7 rounded-full transition-colors border-2 border-transparent dark:bg-slate-700"></div>
                        <div class="dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full shadow-sm transition-transform flex items-center justify-center">
                            <i id="theme-icon" class="fas fa-sun text-[10px] text-yellow-500 transition-all"></i>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Navigation Dots -->
            <div id="dot-container" class="flex items-center space-x-3 order-1 lg:order-2" aria-label="Carousel Pagination">
                <!-- Dots injected here -->
            </div>

            <!-- Auto-Advance Toggle -->
            <div id="auto-advance-controls" class="flex items-center gap-3 order-3">
                <span id="toggle-label" class="text-sm font-bold text-slate-700 dark:text-slate-300">Auto-advance</span>
                <label for="auto-toggle" class="flex items-center cursor-pointer relative">
                    <input type="checkbox" id="auto-toggle" class="sr-only" aria-labelledby="toggle-label">
                    <div class="block bg-gray-300 w-12 h-7 rounded-full transition-colors border-2 border-transparent dark:bg-slate-700"></div>
                    <div class="dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full shadow-sm transition-transform"></div>
                </label>
            </div>
        </div>
    </footer>

    <script src="card01.js"></script>
    
    <script>
       
        let currentIndex = 0;
        let autoAdvanceInterval = null;
        let textScrollInterval = null;
        let isGridMode = false;
        let isNightMode = false;
        let isUserHoveringText = false;
        const AUTO_ADVANCE_DELAY = 10000; // Increased to 10s to allow for text reading

        const appBody = document.getElementById('app-body');
        const sliderContainer = document.getElementById('slider-container');
        const sliderTrack = document.getElementById('slider-track');
        const dotContainer = document.getElementById('dot-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const autoToggle = document.getElementById('auto-toggle');
        const layoutToggle = document.getElementById('layout-toggle');
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const navArrows = document.getElementById('nav-arrows');
        const autoControls = document.getElementById('auto-advance-controls');

        function init() {
            renderCards();
            renderDots();
            updateUI();
            setupEventListeners();
        }

        function renderCards() {
            sliderTrack.innerHTML = CARD_DATA.map((card, index) => {
                const mediaHtml = card.videoUrl 
                    ? `<iframe 
                        class="w-full h-full" 
                        src="${card.videoUrl}" 
                        title="${card.title} video" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen></iframe>`
                    : `<img src="${card.image}" alt="${card.alt}" class="w-full h-full object-cover"/>`;

                return `
                <div class="card-wrapper" role="group" aria-roledescription="slide" aria-label="Slide ${index + 1} of ${CARD_DATA.length}">
                    <div class="card-container max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl overflow-hidden flex flex-col md:flex-row h-full max-h-[75vh] border border-transparent dark:border-slate-700 transition-all">
                        
                        <div class="card-media w-full md:w-1/2 h-56 md:h-auto relative flex-shrink-0 bg-black">
                            ${mediaHtml}
                        </div>
                        
                        <div class="card-text w-full md:w-1/2 p-8 md:p-12 md:pt-16 flex flex-col justify-start bg-white dark:bg-slate-800 overflow-y-auto overflow-x-hidden custom-scrollbar relative" 
                             onmouseenter="isUserHoveringText = true" 
                             onmouseleave="isUserHoveringText = false">
                            <span class="text-blue-600 dark:text-blue-400 font-bold uppercase tracking-widest text-[10px] mb-2 flex-shrink-0">Feature ${index + 1}</span>
                            <h2 class="text-2xl md:text-4xl font-black text-slate-900 dark:text-white mb-2 leading-tight flex-shrink-0">${card.title}</h2>
                            
                            <p class="text-sm text-slate-500 dark:text-slate-400 font-bold mb-6 flex items-center gap-2 flex-shrink-0">
                                <i class="fas fa-camera text-blue-500 dark:text-blue-400 text-xs"></i> 
                                <span>Source: <span class="text-slate-800 dark:text-slate-100">${card.photographer}</span></span>
                            </p>
                            
                            <p class="text-slate-700 dark:text-slate-300 text-lg leading-relaxed pb-6 card-body-text">${card.body}</p>
                        </div>
                    </div>
                </div>
            `;}).join('');
        }

        function renderDots() {
            dotContainer.innerHTML = CARD_DATA.map((_, index) => `
                <button 
                    onclick="goToSlide(${index})" 
                    class="nav-dot w-3 h-3 rounded-full bg-gray-400 transition-all hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 dark:bg-slate-600" 
                    aria-label="Go to slide ${index + 1}"
                    id="dot-${index}">
                </button>
            `).join('');
        }

        function startTextAutoScroll() {
            stopTextAutoScroll();
            if (!autoToggle.checked || isGridMode) return;

            const activeCard = document.querySelectorAll('.card-wrapper')[currentIndex];
            const textArea = activeCard.querySelector('.card-text');
            
            // Wait a moment before starting scroll
            setTimeout(() => {
                textScrollInterval = setInterval(() => {
                    if (isUserHoveringText) return; // Pause on hover
                    
                    if (textArea.scrollTop + textArea.clientHeight >= textArea.scrollHeight - 2) {
                        // End reached, do nothing or loop
                    } else {
                        textArea.scrollTop += 0.5; // Very slow cinematic crawl
                    }
                }, 50);
            }, 2000);
        }

        function stopTextAutoScroll() {
            if (textScrollInterval) {
                clearInterval(textScrollInterval);
                textScrollInterval = null;
            }
        }

        function updateUI() {
            // Theme Logic
            if (isNightMode) {
                appBody.classList.add('dark');
                themeIcon.classList.replace('fa-sun', 'fa-moon');
                themeIcon.classList.replace('text-yellow-500', 'text-blue-400');
            } else {
                appBody.classList.remove('dark');
                themeIcon.classList.replace('fa-moon', 'fa-sun');
                themeIcon.classList.replace('text-blue-400', 'text-yellow-500');
            }

            // Layout Logic
            if (isGridMode) {
                sliderContainer.classList.add('grid-mode', 'overflow-y-auto', 'custom-scrollbar');
                sliderContainer.classList.remove('overflow-hidden');
                navArrows.classList.add('hidden');
                dotContainer.classList.add('invisible');
                autoControls.classList.add('invisible');
                stopTextAutoScroll();
            } else {
                sliderContainer.classList.remove('grid-mode', 'overflow-y-auto', 'custom-scrollbar');
                sliderContainer.classList.add('overflow-hidden');
                navArrows.classList.remove('hidden');
                dotContainer.classList.remove('invisible');
                autoControls.classList.remove('invisible');
                
                sliderTrack.style.transform = `translateX(-${currentIndex * 100}%)`;
                
                document.querySelectorAll('.nav-dot').forEach((dot, index) => {
                    if (index === currentIndex) {
                        dot.classList.add('bg-blue-600', 'w-8');
                        dot.classList.remove('bg-gray-400', 'w-3', 'dark:bg-slate-600');
                    } else {
                        dot.classList.remove('bg-blue-600', 'w-8');
                        dot.classList.add('bg-gray-400', 'w-3', 'dark:bg-slate-600');
                    }
                });
                startTextAutoScroll();
            }

            const slides = document.querySelectorAll('.card-wrapper');
            slides.forEach((slide, i) => {
                if (isGridMode) {
                    slide.setAttribute('aria-hidden', 'false');
                } else {
                    slide.setAttribute('aria-hidden', i !== currentIndex);
                    const contentArea = slide.querySelector('.overflow-y-auto');
                    if (contentArea && i === currentIndex) contentArea.scrollTop = 0;
                }
            });
        }

        function goToSlide(index) {
            if (isGridMode) return;
            currentIndex = index;
            if (currentIndex >= CARD_DATA.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = CARD_DATA.length - 1;
            updateUI();
        }

        function nextSlide() { goToSlide(currentIndex + 1); }
        function prevSlide() { goToSlide(currentIndex - 1); }

        function toggleAutoAdvance() {
            if (autoToggle.checked && !isGridMode) {
                autoAdvanceInterval = setInterval(nextSlide, AUTO_ADVANCE_DELAY);
                autoToggle.nextElementSibling.classList.replace('bg-gray-300', 'bg-blue-100');
                startTextAutoScroll();
            } else {
                clearInterval(autoAdvanceInterval);
                autoAdvanceInterval = null;
                autoToggle.nextElementSibling.classList.replace('bg-blue-100', 'bg-gray-300');
                autoToggle.checked = false;
                stopTextAutoScroll();
            }
        }

        function toggleLayout() {
            isGridMode = layoutToggle.checked;
            layoutToggle.nextElementSibling.classList.toggle('bg-blue-100', isGridMode);
            layoutToggle.nextElementSibling.classList.toggle('bg-gray-300', !isGridMode);
            updateUI();
        }

        function toggleTheme() {
            isNightMode = themeToggle.checked;
            themeToggle.nextElementSibling.classList.toggle('bg-blue-100', isNightMode);
            themeToggle.nextElementSibling.classList.toggle('bg-gray-300', !isNightMode);
            updateUI();
        }

        function setupEventListeners() {
            prevBtn.addEventListener('click', prevSlide);
            nextBtn.addEventListener('click', nextSlide);
            autoToggle.addEventListener('change', toggleAutoAdvance);
            layoutToggle.addEventListener('change', toggleLayout);
            themeToggle.addEventListener('change', toggleTheme);

            document.addEventListener('keydown', (e) => {
                if (isGridMode) return;
                if (e.key === 'ArrowLeft') prevSlide();
                if (e.key === 'ArrowRight') nextSlide();
            });

            let touchStartX = 0;
            let touchEndX = 0;
            sliderTrack.addEventListener('touchstart', e => {
                if (isGridMode) return;
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });
            
            sliderTrack.addEventListener('touchend', e => {
                if (isGridMode) return;
                touchEndX = e.changedTouches[0].screenX;
                if (touchEndX < touchStartX - 50) nextSlide();
                if (touchEndX > touchStartX + 50) prevSlide();
            }, { passive: true });
        }

        window.onload = init;
    </script>
</body>
</html>
